<%- include("partials/header") %> 
<% if(user.id) {%> 

    <main>
        <div class="container">
            <% if (posts.length == 0) { %>
                <section class="user_header">
                    <div class="">
                        <div class="col">
                            <h1>Welcome Back <%=user.userName%>     <a href="/post/createpost">
                                <i class="small material-icons valign-wrapper">add</i>
                             </a> </h1>
                        
                            <span><a href="/logout"><i class="class small material-icons">exit_to_app</i></a></span>
                        </div>
                        <div class="large-container center">
                            <h5>No Post Here. Only Squirrels. Click the + button to create a post.</h5>
                            <img class="responsive-img" src="../img/squirrel.jpg" alt="">
                        </div>
                    </div>
                </section>
             
            <% } else { %> 
            <section class="user_header">
                <div class="">
                    <div class="col">
                        
                        <h1>Welcome Back <%=user.userName%>     <a href="/post/createpost">
                            <i class="small material-icons valign-wrapper">add</i>
                         </a> </h1>
                    
                        <span><a href="/logout"><i class="class small material-icons">exit_to_app</i></a></span>
                    </div>
                  
                </div>
                
            </section>
            <section class="popular_post">
                <div class="row hide-on-med-and-down">
                    <h1>Most Popular Recipe: <%= posts[0].recipeName %> </h1>

                    <div class="card horizontal">
                        <div class="card-image">
                          <img class="responsive-img" src="<%=posts[0].image%> ">
                        </div>
                        <div class="card-stacked">
                          <div class="card-tabs">
                            <ul class="tabs tabs-fixed-width">
                              <li class="tab"><a href="#details">Details</a></li>
                              <li class="tab"><a href="#ingredients">Ingredients</a></li>
                              <li class="tab"><a href="#directions">Directions</a></li>
                            </ul>
                          </div>
                          <div class="card-content grey lighten-4">
                            <div id="details">
                              <h4 class="flow-text">Likes: <%= posts[0].likes  %> </h4>
                              <br>
                              <h4 class="flow-text">Description: <%= posts[0].description  %> </h4>
                              <br>
                              <!-- <h4 class="flow-text">Rating: </h4> -->
                            </div>
                            <div id="ingredients">
                              <ul class="">
                                <% for( let i = 0; i < posts[0].recipeIngredients.length; i++ ) { %>
                                    <li class="ingredient-list"><%= posts[0].recipeIngredients[i] %> </li>
                                <% } %>
                              </ul>
                            </div>
                            <div id="directions">
                              <ol>
                                <% for( let i = 0; i < posts[0].recipeDirections.length; i++ ) { %>
                                    <li class=""><%= posts[0].recipeDirections[i] %> </li>
                                <% } %>                            
                              </ol>
                            </div>
                          </div>
                          <!-- <div class="card-content">
                            <p>I am a very simple card. I am good at containing small bits of information.</p>
                          </div> -->
                          <div class="card-action">
                            <form action="/post/deletePost/<%= posts[0].id %>?_method=DELETE" method="POST">
                                <button class="" type="submit">  <i class="small material-icons valign-wrapper">delete</i></button>
                          
                            </form>
                            <!-- <a href="#">This is a link</a> -->
                          </div>
                        </div>    
                    </div>
                </div>
            </section>
        
            <section>
                <div>
                    <% for( let i = 1; i < posts.length; i++ ) { %>
                        <% if (i%2 !== 0) { %>
                          <div class="card small  col left s5">
                            <div class="card-image waves-effect waves-block waves-light">
                              <img class="activator responsive-img" src="<%=posts[i].image%> " >
                            </div>
                            <div class="card-content">
                              <span class="card-title activator grey-text text-darken-4"><%=posts[i].recipeName%> <i class="material-icons right">more_vert</i></span>
                              <p><a href="/post/<%=posts[i]._id%> ">This is a link</a></p>
                            </div>
                            <div class="card-reveal">
                              <span class="card-title grey-text text-darken-4">Description<i class="material-icons right">close</i></span>
                              <p><%= posts[i].description %> </p>
                            </div>
                          </div>	  
                        <% } else {%>
                          <div class="card small sub col offset-s2 s5">
                            <div class="card-image waves-effect waves-block waves-light">
                              <img class="activator responsive-img" src="<%=posts[i].image%> " >
                            </div>
                            <div class="card-content">
                              <span class="card-title activator grey-text text-darken-4"><%=posts[i].recipeName%> <i class="material-icons right">more_vert</i></span>
                              <p><a href="/post/<%=posts[i]._id%> ">This is a link</a></p>
                            </div>
                            <div class="card-reveal">
                              <span class="card-title grey-text text-darken-4">Description<i class="material-icons right">close</i></span>
                              <p><%=posts[i].description%> </p>
                            </div>
                          </div>
                        <% } %> 
                      <% } %>
              

                </div>
            </section>
            <% } %> 
        </div>  
    </main>

<% } else { %>
  
    <main>
        <div class="container">
            <section class="user_header">
                <div class="row">
                    <div class="col s6">
                        <h1>Insert User Name</h1>
                    </div>
        
                </div>
                
            </section>
            <section class="popular_post">
        
                <div class="row">
                    <a href="">
                        <div class="col s6">
                            <h3>Highest Rated Recipe</h3>
                            <img src="https://via.placeholder.com/300" alt="most popular post by ratings">    
                        </div>
                        <br><br><br>
                        <div class="col s6">
                            <h4>
                                Title: 
                            </h4>
                            <h5>
                                Likes:
                            </h5>
                            <h5>
                                Rating:
                            </h5>
                            <h5>
                                Description:
                            </h5>
                            <h5>
                                Tags:
                            </h5>
                        </div>
                    </a>
                </div>
            </section>
        
            <section>
                <div>
                    insert rest of post based on how i render out the home feed.
                </div>
            </section>
        </div>  
    </main>



<% } %> 


<%- include("partials/footer") %> 
